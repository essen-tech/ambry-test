# Wholesum

## Getting started

This project makes use of [Prettier](https://prettier.io/) as a code formatter.

- For sublime, install [JsPrettier plugin](https://packagecontrol.io/packages/JsPrettier)
- For visual studio code, install [Prettier extension](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)
- Your node version needs to be 10 (To check what version you are currently using `node --version`)

```zsh
> nvm use 10
```

- Install dependencies

```zsh
> yarn
```

- Install [Docker](https://docs.docker.com/docker-for-mac/install/)

- Initiate docker-instance

```zsh
> cd wordpress && docker-compose up --build
```

- There are three environment files that needs to be imported for the project to work properly.

  | file             |  location  |
  | ---------------- | :--------: |
  | .env.development |    root    |
  | .env.production  |    root    |
  | .env             | /wordpress |

## Installing WP plugins on local docker-instance

- Locate your docker container

```zsh
> docker ps
```

- Access your container by CONTAINER ID

```zsh
> docker exec -it [CONTAINER ID] /bin/bash
```

- Install the wordpress plugin. Read more here [wp plugin install](https://developer.wordpress.org/cli/commands/plugin/install/)

```zsh
> wp plugin install <plugin|zip|url> --allow-root
```

## Developing with local data

- Start docker wordpress instance

```zsh
> cd wordpress && docker-compose up
```

- Start local server

```zsh
> yarn run dev
```

## Develop with production data

To compile, run:

```zsh
> yarn run build
```

## Branch structure

To keep the branches as structured and as clean as possible; follow this structure.

- When creating a new feature or addition. Use the following syntax:
  `feature/[NAME OF FEATURE]`
- When maintaining an existing feature, component or similar. Use the following syntax:
  `maintenance/[NAME OF EXISTING FEATURE]`
- When fixing a bug. Use the following syntax:
  `bug/[SHORT DESCRIPTION OF BUG]`
- When pushing a hotfix. Use the following syntax:
  `hotfix/[SHORT DESCRIPTION OF HOTFIX]`

- When you are finished working with a branch and it has been merged. Delete it to keep the repository as clean as possible.

## Common issues

If you have the wp CMS running locally and try to run the gatsby frontend, it might fail and complain about the file "\_.json" missing. This file is autogenerated from the content in Pages in the wp CMS. To fix it, try making a change to a page in the CMS, e.g. adding a section to "Home". Then press update in the CMS, and try starting gatsby again.
